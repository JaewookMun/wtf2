<!DOCTYPE html>
<html
    xmlns:th="http://www.thymeleaf.org"
    class="light-style customizer-hide"
    dir="ltr"
    data-theme="theme-default"
    data-template="vertical-menu-template-free"
    data-assets-path="/modules/sneat/assets/"
>
<head>
    <meta charset="UTF-8">
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    >
    <title>WTF2</title>
    <link rel="stylesheet" href="/css/custom.css">

    <script src="/modules/jquery-3.7.0/jquery-3.7.0.min.js"></script>
    <link rel="stylesheet" href="/modules/sneat/assets/vendor/fonts/boxicons.css">
    <link rel="stylesheet" href="/modules/sneat/assets/vendor/css/core.css" class="template-customizer-core-css">
    <link rel="stylesheet" href="/modules/sneat/assets/vendor/css/theme-default.css" class="template-customizer-theme-css">
    <link rel="stylesheet" href="/modules/sneat/assets/css/demo.css">

    <link rel="stylesheet" href="/modules/sneat/assets/vendor/css/pages/page-auth.css">
    <link rel="stylesheet" href="/modules/bootstrap-5.3.3-dist/css/bootstrap.min.css">
</head>
<body>
    <div class="content-xxl">
        <div class="authentication-wrapper authentication-basic container-p-y>">
            <div class="authentication-inner">
                <div class="card">
                    <div class="card-body">

                        <!--  -->

                        <h4 class="mb-2">LOGIN</h4>
                        <p class="mb-4">Start with your account</p>

                        <form id="loginForm" class="mb-3" method="post" action="/login">
                            <div class="mb-3">
                                <label for="username" class="form-label">Username</label>
                                <input
                                        type="text"
                                        id="username"
                                        name="username"
                                        class="form-control"
                                        placeholder="Enter your username"
                                />

                                <div class="mb-3 form-password-toggle">
                                    <div class="d-flex justify-content-between">
                                        <label class="form-label" for="password">Password</label>
                                    </div>
                                    <div class="input-group input-group-merge">
                                        <input
                                                type="password"
                                                id="password"
                                                class="form-control"
                                                name="password"
                                                placeholder="&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;"
                                                aria-describedby="password"
                                        />
                                        <span class="input-group-text cursor-pointer"><i class="bx bx-hide"></i></span>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="remember-me" />
                                    <label class="form-check-label" for="remember-me"> Remember Me </label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <button class="btn btn-primary d-grid w-100" type="submit">Sign in</button>
                            </div>
                        </form>

                        <p class="text-center">
                            <span>처음이신가요?</span>
                            <a href="" data-bs-toggle="modal" data-bs-target="#registerModal">
                                <span>계정 새로 생성하기</span>
                            </a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- register Modal -->
    <div class="modal fade" id="registerModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">계정 생성하기</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body ask-question">
                    <div class="row">
                        <p>기존에 등록한 고객이신가요?</p>
                    </div>
                    <div class="row">
                        <div class="col-6 text-end">
                            <button id="newCompanyBtn" class="btn btn-primary btn-join">신규 기업</button>
                        </div>
                        <div class="col-6 text-start">
                            <button id="presentCompanyBtn" class="btn btn-gray btn-join">기존 기업</button>
                        </div>
                    </div>
                </div>
                <div class="modal-body register-company d-none">
                    <div class="row">
                        <!-- TODO: add company from api search -->
                        <div class="col mb-3">
                            <label for="companyName" class="form-label">회사명</label>
                            <input type="text" id="companyName" name="companyName" class="form-control" placeholder="회사명" />
                            <button data-bs-toggle="modal" data-bs-target="#searchModal">검색</button>
                        </div>
                    </div>
                    <div class="row">
                        <button id="registerCompanyBtn"></button>
                    </div>
                </div>
                <div class="modal-body register-user d-none">
                    <div class="row g-2">
                        <div class="col mb-0">
                            <label for="name" class="form-label">Email</label>
                            <input type="text" id="name" name="name" class="form-control" placeholder="xxxx@xxx.xx" />
                        </div>
                        <div class="col mb-0">
                            <label for="dobBasic" class="form-label">DOB</label>
                            <input type="text" id="dobBasic" class="form-control" placeholder="DD / MM / YY" />
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                        Close
                    </button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- search Company Modal -->
    <div class="modal fade" id="searchModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">기업 검색하기</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="input-group">
                        <input type="text" name="companyName" class="form-control" placeholder="예)회사명" />
                        <span id="searchCompany" class="input-group-text cursor-pointer">
                            <i class='bx bx-search'></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/modules/sneat/assets/vendor/js/bootstrap.js"></script>
    <script th:inline="javascript">
        $(function () {
            initModalSetting();
        });

        function initModalSetting() {
            // Modal screen
            $('#newCompanyBtn').click(function() {
                $('#registerModal .register-company').removeClass('d-none');
                $('#registerModal .ask-question').addClass('d-none');
            });

            $('#presentCompanyBtn').click(function() {
                $('#registerModal .register-user').removeClass('d-none');
                $('#registerModal .ask-question').addClass('d-none');
            });

            $('#registerModal').on('hidden.bs.modal', function(){
                $('#registerModal .ask-question').removeClass('d-none');
                $('#registerModal .register-company').addClass('d-none');
                $('#registerModal .register-user').addClass('d-none');
            });

            // company register
            // $('#registerCompanyBtn').click(function() {
            //     $.ajax({
            //         url: ''
            //     })
            // });

            // searchModal
            $('#searchCompany').click(function() {
                let name = $('#searchModal input[name=companyName]').val();
                console.log('name: ', name);

                $.ajax({
                    url: '/company/search?name=' + name,
                    method: 'GET',
                    success: function(res) {
                        console.log(res);
                    }
                });
            });
        }

    </script>
</body>
</html>